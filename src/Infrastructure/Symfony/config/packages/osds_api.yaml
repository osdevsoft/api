old_sound_rabbit_mq:
    connections:
        default:
            host: rabbitmq
            user: rabbitmq
            password: rabbitmq

    consumers:
        insert_queue:
            connection: default
            queue_options: { name: 'insert_queue'}
            callback: InsertEntityConsumer


services:

    SymfonyContainer:
        class: Osds\Api\Infrastructure\Bus\SymfonyContainer
        autowire: true

    RabbitMQ:
        class: Osds\Api\Infrastructure\AMQP\RabbitMQ
        arguments:
            - rabbitmq
            - 5672
            - rabbitmq
            - rabbitmq


    Illuminate\Http\Request:
        autowire: true

    Osds\Api\Domain\Bus\Query\QueryBus:
        autowire: true
#        arguments: [ "@SymfonyContainer" ]

    Osds\Api\Domain\Bus\Command\CommandBus:
        autowire: true
#        arguments:
#            - "@SymfonyContainer"

    #### Insert Entity
    Osds\Api\UI\InsertEntityController:
        autowire: true
        tags: ['controller.service_arguments']
    Osds\Api\Application\Insert\InsertEntityCommandHandler:
        public: true
        arguments:
            - "@InsertEntityUseCase"
            - "@RabbitMQ"
    InsertEntityUseCase:
        class: Osds\Api\Application\Insert\InsertEntityUseCase
        autowire: true
    Osds\Api\Application\Insert\InsertEntityRepository:
        autowire: true
    InsertEntityConsumer:
        class: Osds\Api\Application\Insert\InsertEntityConsumer
        autowire: true


    #### Search Entity
#    Osds\Api\Application\Search\SearchEntityQueryBus:
#        autowire: true
    Osds\Api\Application\Search\SearchEntityQueryHandler:
        public: true
        autowire: true
    Osds\Api\Application\Search\SearchEntityUseCase:
        autowire: true
    Osds\Api\Application\Search\SearchEntityRepository:
        autowire: true
    Osds\Api\UI\SearchEntityController:
        autowire: true
        tags: ['controller.service_arguments']


    #### Update Entity
    Osds\Api\Application\Update\UpdateEntityCommandHandler:
        public: true
        arguments:
            - "@UpdateEntityUseCase"
            - "@RabbitMQ"
    UpdateEntityUseCase:
        class: Osds\Api\Application\Update\UpdateEntityUseCase
        autowire: true
    Osds\Api\Application\Update\UpdateEntityRepository:
        autowire: true
    Osds\Api\UI\UpdateEntityController:
        autowire: true
        tags: ['controller.service_arguments']

    #### Delete Entity
    Osds\Api\Application\Delete\DeleteEntityCommandHandler:
        public: true
        arguments:
            - "@DeleteEntityUseCase"
            - "@RabbitMQ"
    DeleteEntityUseCase:
        class: Osds\Api\Application\Delete\DeleteEntityUseCase
        autowire: true
    Osds\Api\Application\Delete\DeleteEntityRepository:
        autowire: true
    Osds\Api\UI\DeleteEntityController:
        autowire: true
        tags: ['controller.service_arguments']